# Hard Work -- TDD Style

## На что больше похож стиль применения TDD (парадигма разработки / дизайна или продуктивная техника тестирования)

При попытке использования TDD придерживаюсь скорее стиля, что
это **только метод тестирования**. Больше всего нравится такой подход при использовании регрессионных тестов.

Ранее мое знакомство с TDD ограничивается небольшими статьями и книгой Гарри Персиваля *"Python: Разработка на основе тестирования"* (в которой как раз говорится про Test First).
Только из Вашей статьи узнал, что сторонники TDD разделяют собственно само TDD и Test First подход.

Испытываю затруднения как раз с предварительным написанием тестов, как раз при использовании тестов как средства фoрмирования дизайна проекта
обычно большие сложности начинаются при реализации, когда становится понятно, что стоило сделать по-другому, приходится изменять тесты.
Таким образом часто вместо написания проекта целыми днями переписываю тесты :). (По прошлому отчету по занятию с TDD может не везде отмечал, но переписывал тесты несколько раз).

Мой подход вряд ли можно назвать очень "чистым" с точки зрения TDD, но на данном этапе это работает для меня лучше всего:

1. Записать примерную (исходя из имеющейся на начальном этапе информации) спецификацию проекта или фичи.
2. Как можно быстрее написать минимально работающую версию (пренебрегая аккуратностью), используя минимум абстракций, получить при этом
   представление, в правильном ли направлении я двигаюсь (а также какую-то порцию дофамина от результата :)).
3. Если все хорошо, закрепляем полученный результат юнит-тестами.
4. Опираясь на тесты, проводим рефакторинг результата, не беспокоясь о том, что-то сломается, т.к. тесты должны подстраховать при этом.
5. Добавляем интеграционные тесты при необходимости.
   Исходя из моего небольшого опыта, и того, что чаще всего работаю один над проектом, это работает для меня лучше всего.

Может быть люди с бОльшим опытом способны заранее лучше видеть конечный результат, и таким образом им проще "позволить тестам направлять дизайн".

## Субъективные плюсы и минусы моего стиля применения TDD

### 1. (+) Гибкость

Гибкость при написании системы: при внесении некоторых небольших изменений (которые не затрагивают спецификацию проекта),
нет необходимости также переписывать значительное количество тестов.

### 2. (+) Проще проверять побочные эффекты и меньше затрат времени

Множество кода, который я пишу, связан с работой с БД, поэтому писать чистые юнит-тесты для этого затруднительно.
Гораздо проще просто использовать интеграционное тестирование уже после написание метода, чтобы убедиться, что возвращаются правильные данные.
Мне кажется такой подход сильно экономит время.

### 3. (+) Проще размышлять о работе программы в целом после написания

Очень, наверное, субъективный плюс, но при "правильном" TDD все методы в классах обычно
разбиваются на очень большое множество мелких. При таком подходе все что происходит в процессе работы, когда один из десятка методов
вызывает другой, тот следующий, какой-то из них изменяет состояние в процессе.
Мне субъективно проще воспринимать одну большую функцию где процедурно описан процесс.

### 1. (-) Недисциплинированность

Рискуем тем, что при таком подходе не каждая строчка подкреплена проверкой тестами,
что-то будет упущено и тест под это никогда не будет написан.
В отдельных случаях возникает ситуация, что из-за нехватки времени тесты также не будут написаны.

### 2. (-) Частая смена курса

Обратная сторона гибкости - если спецификация направляется и закрепляется тестами, это помогло бы перестать вносить неожиданные и неоправданные изменения.

### 3. (-) Отсутствие уверенности в аккуратности и правильности работы кода

Когда все-таки получалось писать по принципу "ни строчки рабочего кода до написания тестов", было довольно легко писать код.
В противовес более "исследовательскому" подходу, когда тесты подготовлены и есть уверенности в их правильности, несложно писать
аккуратный и красивый код:). При этом ощущается меньше тревоги о том, что что-то могло быть упущено.

## Выводы

По итогам, да, видимо мне действительно больше подходит использование **TDD** только как инструмента для тестирования в проектах, но также заинтересован в прочтении чего-нибудь из Кента Бека. Возможно, мне просто не хватает полного понимания методологии.
